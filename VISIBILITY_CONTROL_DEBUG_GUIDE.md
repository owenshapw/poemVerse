# 可见性控制按钮调试指南

## 🔍 问题排查步骤

### 第1步：确认你在正确的页面

**可见性控制按钮只在「作者作品集页面」显示**

正确的页面特征：
- 顶部显示作者名字 + 文章数量计数（如 "1/3"）
- 右上角有点赞和下载按钮
- 页面可以左右滑动切换文章
- URL/导航应该是 `AuthorWorksScreen`

❌ **不会显示按钮的页面**：
- 首页（Home）
- 我的文章列表页面（MyArticlesScreen）
- 文章详情页面（ArticleDetailScreen）

### 第2步：检查登录状态

**必须以作者身份登录**

1. 确认你已经登录了账号
2. 确认你是要查看的文章的作者
3. 检查控制台日志（我已添加调试信息）

### 第3步：查看调试信息

运行应用后，在控制台查找这些信息：

```
=== 权限检查 ===
是否登录: true/false
当前用户名: your_username
作品作者: article_author
是否为作者本人: true/false
```

### 第4步：到达作者作品集页面的方法

#### 方法A：发布新文章（推荐）
1. 登录你的账号
2. 点击"发布诗篇"或"开始创作"
3. 填写内容并发布文章
4. **自动跳转到作品集页面** 🎯

#### 方法B：从首页进入
1. 登录你的账号
2. 在首页找到你发布的文章
3. 点击文章上的**作者名字**（不是文章内容）
4. 进入作品集页面

#### 方法C：从我的文章页面
1. 进入"我的诗篇"页面
2. 点击任意文章进入详情页
3. 在详情页点击**作者名字**
4. 进入作品集页面

## 🎯 按钮的具体位置

### 右上角圆形图标
- 位置：文章卡片的右上角
- 外观：半透明黑色圆形背景
- 图标：
  - 🌍 绿色地球图标 = 公开可见
  - 🔒 橙色锁定图标 = 私密

### 底部状态条
- 位置：文章卡片的底部
- 外观：渐变黑色背景
- 内容：
  - 左侧：状态图标 + "在首页展示" 或 "仅个人可见"
  - 右侧：切换按钮 "隐藏" 或 "公开"

## 🐛 常见问题和解决方案

### 问题1：看到红色调试信息
如果你看到红色的"非作者本人，不显示控制按钮"，说明：
- 你可能没有登录
- 或者你登录了但不是这篇文章的作者

**解决方案**：
1. 确认登录状态
2. 查看控制台的调试信息
3. 确认用户名匹配

### 问题2：在错误的页面
如果你在其他页面找按钮，是找不到的。

**解决方案**：
按照上面的方法到达正确的「作者作品集页面」

### 问题3：后端支持
如果按钮显示了但点击没反应或报错：

**解决方案**：
1. 确认后端已部署可见性控制API
2. 检查网络连接
3. 查看控制台错误信息

## 🧪 快速测试方法

### 最简单的测试步骤：
1. **登录你的账号**
2. **发布一篇新文章**（随便写什么都行）
3. **发布成功后会自动跳转到作品集**
4. **立即就能看到控制按钮** ✅

### 如果还是看不到：
查看控制台输出，应该会显示详细的调试信息帮助定位问题。

## 📱 UI 截图参考

作品集页面应该长这样：

```
┌─────────────────────────────────┐
│  ← [作者名] [1/3]    ♥️ 2  📥    │ ← 顶部栏
├─────────────────────────────────┤
│                           🌍    │ ← 右上角可见性图标
│                                 │
│     文章内容区域                 │
│                                 │
│                                 │
├─────────────────────────────────┤
│ 🌍 在首页展示        [隐藏]      │ ← 底部状态条
└─────────────────────────────────┘
```

## 🔧 移除调试信息

测试完成后，记得移除我添加的调试信息：
1. 删除 `print` 语句
2. 删除红色的调试容器
3. 恢复正常的UI显示